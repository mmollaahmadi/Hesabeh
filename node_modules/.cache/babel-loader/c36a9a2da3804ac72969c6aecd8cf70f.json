{"ast":null,"code":"var _jsxFileName = \"/home/mohammad/Desktop/Hesabeh/src/components/app/app.js\";\nimport React, { Component } from \"react\";\nimport { Route, withRouter, Switch } from \"react-router-dom\"; // import { getCurrentUser } from '../util/APIUtils';\n// import { ACCESS_TOKEN } from '../constants';\n\nimport \"../../assets/css/argon-design-system-react.css\";\nimport \"../../assets/vendor/@fortawesome/fontawesome-free/css/all.min.css\";\nimport \"../../assets/vendor/nucleo/css/nucleo.css\";\nimport \"../../assets/vendor/font-awesome/css/font-awesome.min.css\";\nimport \"../../assets/css/bootstrap-rtl.css\";\nimport \"../../assets/css/custom.css\";\nimport \"../../assets/css/animate.css\";\nimport \"aos/dist/aos.css\";\nimport \"react-persian-calendar-date-picker/lib/DatePicker.css\";\nimport MainPage from \"../pages/main-page/main-page\";\nimport UserDashboardPage from \"../pages/user-dashboard-page/user-dashboard-page.js\";\nimport GroupDashboardPage from \"../pages/group-dashboard-page/group-dashboard-page.js\";\nimport MyGroupsPage from \"../pages/my-groups-page/my-groups-page.js\";\nimport NewPasswordRequestPage from \"../pages/audit-pages/forgot-password-pages/new-password-request-page.js\";\nimport SupportPage from \"../pages/support-page/support-page.js\";\nimport LoginPage from \"../pages/audit-pages/login-page/login-page.js\";\nimport RegisterPage from \"../pages/audit-pages/register-page/register-page.js\";\nimport MyFinanceAccountPage from \"../pages/my-account-page/my-account-page.js\";\nimport CreateNewGroupPage from \"../pages/my-groups-page/create-new-group-page.js\";\nimport NotificationsPage from \"../pages/notifications-page/notifications-page.js\";\nimport CreateNewRequestPage from \"../pages/notifications-page/new-request/create-new-request-page.js\";\nimport AddPaymentPage from \"../pages/my-account-page/add-new-payment/add-new-payment.js\";\nimport HelpPage from \"../pages/help-page/help-page\";\nimport GoToUp from \"../my-components/go-to-up/go-to-up.js\";\nimport NavBar from \"../common/nav-bar/nav-bar\";\nimport Footer from \"../common/footer/footer\";\nimport { goToAnchor, configureAnchors } from \"react-scrollable-anchor\";\nimport { USERS } from \"../../constants/constants\";\nimport ConfirmRegistration from \"../pages/audit-pages/confirm-registration/confirm-registration\";\nimport { getCurrentUser } from \"../../utils/auditUtils\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentUser: null,\n      isAuthenticated: false,\n      isLoading: false,\n      selectedPage: \"Hesabeh\",\n      goto: \"\"\n    };\n    configureAnchors({\n      offset: -70,\n      scrollDuration: 300\n    });\n    this.handleLogout = this.handleLogout.bind(this);\n    this.loadCurrentUser = this.loadCurrentUser.bind(this);\n    this.handleLogin = this.handleLogin.bind(this);\n    this.getUser = this.getUser.bind(this);\n    this.handleChangePage = this.handleChangePage.bind(this);\n    this.goto = this.goto.bind(this);\n  }\n\n  goto(pathname, hash) {\n    if (this.props.history.location.pathname === pathname) {\n      this.props.history.replace(pathname, \"1\");\n      goToAnchor(hash);\n    } else {\n      this.props.history.push({\n        pathname: pathname,\n        hash: \"#\" + hash,\n        state: \"1\"\n      });\n    }\n  }\n\n  handleChangePage(_selectedPage) {\n    this.setState({\n      selectedPage: _selectedPage\n    });\n  }\n\n  getUser(usernameOrEmailOrPhoneNumber) {\n    let _user = null;\n    USERS.forEach(user => {\n      if (user.username === usernameOrEmailOrPhoneNumber || user.email === usernameOrEmailOrPhoneNumber || user.phoneNumber === usernameOrEmailOrPhoneNumber) _user = user;\n    });\n    return _user;\n  }\n\n  loadCurrentUser(emailOrUsernameOrPhoneNumber, password) {\n    // let user = null;\n    // // eslint-disable-next-line array-callback-return\n    // USERS.map(u => {\n    //   if (\n    //     (u.username === emailOrUsernameOrPhoneNumber ||\n    //       u.email === emailOrUsernameOrPhoneNumber) &&\n    //     u.password === password\n    //   ) {\n    //     user = {\n    //       id: u.id,\n    //       name: u.name,\n    //       username: u.username,\n    //       email: u.email,\n    //       phoneNumber: u.phoneNumber,\n    //     };\n    //   }\n    // });\n    //\n    // if (user)\n    //   this.setState({\n    //     currentUser: user,\n    //     isAuthenticated: true,\n    //     isLoading: true,\n    //     selectedPage: \"my-account\"\n    //   });\n    // else {\n    //   this.setState({\n    //     currentUser: user,\n    //     isAuthenticated: false,\n    //     isLoading: false\n    //   });\n    // }\n    getCurrentUser().then(response => {\n      this.setState({\n        currentUser: response,\n        isAuthenticated: true,\n        isLoading: false\n      });\n    }).catch(error => {\n      this.setState({\n        isLoading: false\n      });\n    });\n  }\n\n  componentDidMount() {\n    if (!this.state.isAuthenticated) {\n      this.setState({\n        currentUser: null,\n        isAuthenticated: false\n      });\n      this.props.history.push('/');\n    } // this.loadCurrentUser();\n\n  }\n\n  handleLogout(redirectTo = \"/\") // notificationType = \"success\",\n  // description = \"You're successfully logged out.\"\n  {\n    // localStorage.removeItem(ACCESS_TOKEN);\n    this.setState({\n      currentUser: null,\n      isAuthenticated: false\n    });\n    this.props.history.push(redirectTo); // notification[notificationType]({\n    //   message: 'Polling App',\n    //   description: description,\n    // });\n  }\n\n  handleLogin(emailOrUsernameOrPhoneNumber, password) {\n    this.loadCurrentUser(emailOrUsernameOrPhoneNumber, password);\n    this.props.history.push(\"/my-account\");\n  }\n\n  render() {\n    if (this.state.isLoading) {// return <LoadingIndicator />\n    }\n\n    return React.createElement(\"div\", {\n      className: \"app-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(NavBar, {\n      isLogin: this.state.isAuthenticated,\n      currentUser: this.state.currentUser,\n      onLogout: this.handleLogout,\n      onChangePage: this.handleChangePage,\n      selectedPage: this.state.selectedPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"app-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/\",\n      exact: true,\n      render: () => React.createElement(MainPage, {\n        onChangePage: this.handleChangePage,\n        isLogin: \"false\",\n        goto: this.goto,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/register\",\n      exact: true,\n      render: () => React.createElement(RegisterPage, {\n        onChangePage: this.handleChangePage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/confirm/token=:token\",\n      exact: true,\n      render: props => React.createElement(ConfirmRegistration, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/login\",\n      exact: true,\n      render: () => React.createElement(LoginPage, {\n        onLogin: this.handleLogin,\n        onChangePage: this.handleChangePage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/forgot-password\",\n      exact: true,\n      render: () => React.createElement(NewPasswordRequestPage, {\n        onChangePage: this.handleChangePage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/support\",\n      exact: true,\n      render: () => React.createElement(SupportPage, {\n        currentUser: this.state.currentUser,\n        isLogin: this.state.isAuthenticated,\n        onChangePage: this.handleChangePage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/help\",\n      exact: true,\n      render: props => React.createElement(HelpPage, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/my-account\",\n      exact: true,\n      render: () => React.createElement(MyFinanceAccountPage, {\n        currentUser: this.state.currentUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/add-new-payment\",\n      exact: true,\n      render: () => React.createElement(AddPaymentPage, {\n        currentUser: this.state.currentUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/dashboard\",\n      exact: true,\n      render: props => React.createElement(UserDashboardPage, Object.assign({\n        currentUser: this.state.currentUser,\n        onLogout: this.handleLogout,\n        onChangePage: this.handleChangePage\n      }, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/notifications\",\n      exact: true,\n      render: props => React.createElement(NotificationsPage, Object.assign({\n        currentUser: this.state.currentUser\n      }, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/create-new-request\",\n      exact: true,\n      render: props => React.createElement(CreateNewRequestPage, Object.assign({\n        getUser: this.getUser,\n        currentUser: this.state.currentUser\n      }, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/my-groups\",\n      exact: true,\n      render: props => React.createElement(MyGroupsPage, Object.assign({\n        currentUser: this.state.currentUser\n      }, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/group-dashboard\",\n      exact: true,\n      render: props => React.createElement(GroupDashboardPage, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/create-new-group\",\n      exact: true,\n      render: props => React.createElement(CreateNewGroupPage, Object.assign({\n        getUser: this.getUser,\n        currentUser: this.state.currentUser\n      }, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }))), React.createElement(Footer, {\n      currentUser: this.state.currentUser,\n      isLogin: this.state.isAuthenticated,\n      goto: this.goto,\n      onChangePage: this.handleChangePage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }), React.createElement(GoToUp, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/home/mohammad/Desktop/Hesabeh/src/components/app/app.js"],"names":["React","Component","Route","withRouter","Switch","MainPage","UserDashboardPage","GroupDashboardPage","MyGroupsPage","NewPasswordRequestPage","SupportPage","LoginPage","RegisterPage","MyFinanceAccountPage","CreateNewGroupPage","NotificationsPage","CreateNewRequestPage","AddPaymentPage","HelpPage","GoToUp","NavBar","Footer","goToAnchor","configureAnchors","USERS","ConfirmRegistration","getCurrentUser","App","constructor","props","state","currentUser","isAuthenticated","isLoading","selectedPage","goto","offset","scrollDuration","handleLogout","bind","loadCurrentUser","handleLogin","getUser","handleChangePage","pathname","hash","history","location","replace","push","_selectedPage","setState","usernameOrEmailOrPhoneNumber","_user","forEach","user","username","email","phoneNumber","emailOrUsernameOrPhoneNumber","password","then","response","catch","error","componentDidMount","redirectTo","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Route, withRouter, Switch } from \"react-router-dom\";\n\n// import { getCurrentUser } from '../util/APIUtils';\n// import { ACCESS_TOKEN } from '../constants';\n\nimport \"../../assets/css/argon-design-system-react.css\";\nimport \"../../assets/vendor/@fortawesome/fontawesome-free/css/all.min.css\";\nimport \"../../assets/vendor/nucleo/css/nucleo.css\";\nimport \"../../assets/vendor/font-awesome/css/font-awesome.min.css\";\nimport \"../../assets/css/bootstrap-rtl.css\";\nimport \"../../assets/css/custom.css\";\nimport \"../../assets/css/animate.css\";\nimport \"aos/dist/aos.css\";\nimport \"react-persian-calendar-date-picker/lib/DatePicker.css\";\n\nimport MainPage from \"../pages/main-page/main-page\";\nimport UserDashboardPage from \"../pages/user-dashboard-page/user-dashboard-page.js\";\nimport GroupDashboardPage from \"../pages/group-dashboard-page/group-dashboard-page.js\";\nimport MyGroupsPage from \"../pages/my-groups-page/my-groups-page.js\";\nimport NewPasswordRequestPage from \"../pages/audit-pages/forgot-password-pages/new-password-request-page.js\";\nimport SupportPage from \"../pages/support-page/support-page.js\";\nimport LoginPage from \"../pages/audit-pages/login-page/login-page.js\";\nimport RegisterPage from \"../pages/audit-pages/register-page/register-page.js\";\nimport MyFinanceAccountPage from \"../pages/my-account-page/my-account-page.js\";\nimport CreateNewGroupPage from \"../pages/my-groups-page/create-new-group-page.js\";\nimport NotificationsPage from \"../pages/notifications-page/notifications-page.js\";\nimport CreateNewRequestPage from \"../pages/notifications-page/new-request/create-new-request-page.js\";\nimport AddPaymentPage from \"../pages/my-account-page/add-new-payment/add-new-payment.js\";\nimport HelpPage from \"../pages/help-page/help-page\";\nimport GoToUp from \"../my-components/go-to-up/go-to-up.js\";\nimport NavBar from \"../common/nav-bar/nav-bar\";\nimport Footer from \"../common/footer/footer\";\n\nimport { goToAnchor, configureAnchors } from \"react-scrollable-anchor\";\nimport { USERS } from \"../../constants/constants\";\nimport ConfirmRegistration from \"../pages/audit-pages/confirm-registration/confirm-registration\";\nimport {getCurrentUser} from \"../../utils/auditUtils\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentUser: null,\n      isAuthenticated: false,\n      isLoading: false,\n      selectedPage: \"Hesabeh\",\n      goto: \"\"\n    };\n    configureAnchors({offset:-70, scrollDuration: 300});\n    this.handleLogout = this.handleLogout.bind(this);\n    this.loadCurrentUser = this.loadCurrentUser.bind(this);\n    this.handleLogin = this.handleLogin.bind(this);\n    this.getUser = this.getUser.bind(this);\n    this.handleChangePage = this.handleChangePage.bind(this);\n    this.goto = this.goto.bind(this);\n  }\n  goto(pathname, hash) {\n    if (this.props.history.location.pathname === pathname) {\n      this.props.history.replace(pathname, \"1\");\n      goToAnchor(hash);\n    } else {\n      this.props.history.push({\n        pathname: pathname,\n        hash: \"#\" + hash,\n        state: \"1\"\n      });\n    }\n  }\n  handleChangePage(_selectedPage) {\n    this.setState({ selectedPage: _selectedPage });\n  }\n  getUser(usernameOrEmailOrPhoneNumber) {\n    let _user = null;\n    USERS.forEach(user => {\n      if (\n        user.username === usernameOrEmailOrPhoneNumber ||\n        user.email === usernameOrEmailOrPhoneNumber ||\n        user.phoneNumber === usernameOrEmailOrPhoneNumber\n      )\n        _user = user;\n    });\n    return _user;\n  }\n  loadCurrentUser(emailOrUsernameOrPhoneNumber, password) {\n    // let user = null;\n    // // eslint-disable-next-line array-callback-return\n    // USERS.map(u => {\n    //   if (\n    //     (u.username === emailOrUsernameOrPhoneNumber ||\n    //       u.email === emailOrUsernameOrPhoneNumber) &&\n    //     u.password === password\n    //   ) {\n    //     user = {\n    //       id: u.id,\n    //       name: u.name,\n    //       username: u.username,\n    //       email: u.email,\n    //       phoneNumber: u.phoneNumber,\n    //     };\n    //   }\n    // });\n    //\n    // if (user)\n    //   this.setState({\n    //     currentUser: user,\n    //     isAuthenticated: true,\n    //     isLoading: true,\n    //     selectedPage: \"my-account\"\n    //   });\n    // else {\n    //   this.setState({\n    //     currentUser: user,\n    //     isAuthenticated: false,\n    //     isLoading: false\n    //   });\n    // }\n    getCurrentUser()\n      .then(response => {\n        this.setState({\n          currentUser: response,\n          isAuthenticated: true,\n          isLoading: false\n        });\n      }).catch(error => {\n      this.setState({\n        isLoading: false\n      });\n    });\n  }\n\n  componentDidMount() {\n    if(!this.state.isAuthenticated){\n      this.setState({\n        currentUser: null,\n        isAuthenticated: false\n      });\n\n      this.props.history.push('/');\n    }\n    // this.loadCurrentUser();\n  }\n\n  handleLogout(\n    redirectTo = \"/\",\n    // notificationType = \"success\",\n    // description = \"You're successfully logged out.\"\n  ) {\n    // localStorage.removeItem(ACCESS_TOKEN);\n\n    this.setState({\n      currentUser: null,\n      isAuthenticated: false\n    });\n\n    this.props.history.push(redirectTo);\n\n    // notification[notificationType]({\n    //   message: 'Polling App',\n    //   description: description,\n    // });\n  }\n\n  handleLogin(emailOrUsernameOrPhoneNumber, password) {\n    this.loadCurrentUser(emailOrUsernameOrPhoneNumber, password);\n    this.props.history.push(\"/my-account\");\n  }\n\n  render() {\n    if (this.state.isLoading) {\n      // return <LoadingIndicator />\n    }\n    return (\n      <div className=\"app-container\">\n        <NavBar\n          isLogin={this.state.isAuthenticated}\n          currentUser={this.state.currentUser}\n          onLogout={this.handleLogout}\n          onChangePage={this.handleChangePage}\n          selectedPage={this.state.selectedPage}\n        />\n\n        <div className=\"app-content\">\n          <Switch>\n            <Route\n              path=\"/\"\n              exact\n              render={() => (\n                <MainPage\n                  onChangePage={this.handleChangePage}\n                  isLogin=\"false\"\n                  goto={this.goto}\n                />\n              )}\n            />\n            <Route\n              path=\"/register\"\n              exact\n              render={() => <RegisterPage\n                onChangePage={this.handleChangePage} />}\n            />\n            <Route\n              path=\"/confirm/token=:token\"\n              exact\n              render={(props) => <ConfirmRegistration {...props}/>}\n            />\n            <Route\n              path=\"/login\"\n              exact\n              render={() => <LoginPage\n                onLogin={this.handleLogin}\n                onChangePage={this.handleChangePage}\n              />}\n            />\n            <Route\n              path=\"/forgot-password\"\n              exact\n              render={() => <NewPasswordRequestPage\n                onChangePage={this.handleChangePage} />}\n            />\n            <Route\n              path=\"/support\"\n              exact\n              render={() => <SupportPage\n                currentUser={this.state.currentUser}\n                isLogin={this.state.isAuthenticated}\n                onChangePage={this.handleChangePage}\n              />}\n            />\n            <Route\n              path=\"/help\"\n              exact\n              render={props => <HelpPage {...props} />}\n            />\n            <Route\n              path=\"/my-account\"\n              exact\n              render={() => (\n                <MyFinanceAccountPage\n                  currentUser={this.state.currentUser}\n                />\n              )}\n            />\n            <Route\n              path=\"/add-new-payment\"\n              exact\n              render={() => (\n                <AddPaymentPage\n                  currentUser={this.state.currentUser}\n                />\n              )}\n            />\n            <Route\n              path=\"/dashboard\"\n              exact\n              render={props => (\n                <UserDashboardPage\n                  currentUser={this.state.currentUser}\n                  onLogout={this.handleLogout}\n                  onChangePage={this.handleChangePage}\n                  {...props}\n                />\n              )}\n            />\n            <Route\n              path=\"/notifications\"\n              exact\n              render={props => <NotificationsPage currentUser={this.state.currentUser} {...props} />}\n            />\n            <Route\n              path=\"/create-new-request\"\n              exact\n              render={props => (\n                <CreateNewRequestPage\n                  getUser={this.getUser}\n                  currentUser={this.state.currentUser}\n                  {...props}\n                />\n              )}\n            />\n            <Route\n              path=\"/my-groups\"\n              exact\n              render={props => <MyGroupsPage\n                currentUser={this.state.currentUser} {...props} />}\n            />\n            <Route\n              path=\"/group-dashboard\"\n              exact\n              render={props => <GroupDashboardPage {...props} />}\n            />\n            <Route\n              path=\"/create-new-group\"\n              exact\n              render={props => (\n                <CreateNewGroupPage\n                  getUser={this.getUser}\n                  currentUser={this.state.currentUser}\n                  {...props}\n                />\n              )}\n            />\n          </Switch>\n        </div>\n        <Footer\n          currentUser={this.state.currentUser}\n          isLogin={this.state.isAuthenticated}\n          goto={this.goto}\n          onChangePage={this.handleChangePage}\n         />\n        <GoToUp/>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}
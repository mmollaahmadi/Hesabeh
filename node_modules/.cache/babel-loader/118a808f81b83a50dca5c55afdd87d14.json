{"ast":null,"code":"import _defineProperty from \"/home/mohammad/Desktop/hesabeh/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/mohammad/Desktop/hesabeh/src/components/common/choose-users/choose-users.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Container, Row, Col, InputGroupAddon, InputGroupText, Button, FormGroup, Form, Input, InputGroup, Card, CardHeader, CardBody, Collapse, Modal } from \"reactstrap\";\nimport Chip from \"../../common/chip/chip\";\nimport GroupUnit from \"./group-unit\";\nimport UserUnit from \"./user-unit\";\nimport AOS from 'aos';\n\nclass ChooseUsers extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleModal = state => {\n      this.setState({\n        [state]: !this.state[state],\n        isStepOne: true\n      });\n    };\n\n    this.state = {\n      consumersCollapse: false,\n      saveInputsValue: false,\n      isStepOne: true,\n      groupsList: [],\n      usersOfGroupsList: [],\n      usersOfSelectedGroupsList: [],\n      isAnyGroupSelected: false,\n      isAnyUserSelected: false,\n      isSelectedConsumers: false\n    };\n    this.animateCSS = this.animateCSS.bind(this);\n    this.handleBackOrNextStep = this.handleBackOrNextStep.bind(this);\n    this.myCallBack = this.myCallBack.bind(this);\n    this.updateSelectedGroupsList = this.updateSelectedGroupsList.bind(this);\n    this.updateSelectedUsersList = this.updateSelectedUsersList.bind(this);\n    this.updateUsersOfSelectedGroupsList = this.updateUsersOfSelectedGroupsList.bind(this);\n    this.handleSelectConsumers = this.handleSelectConsumers.bind(this);\n    AOS.init();\n  }\n\n  handleSelectConsumers() {\n    if (this.state.isAnyGroupSelected && this.state.isAnyUserSelected) {\n      let _groupsList = this.state.groupsList;\n\n      _groupsList.forEach(group => {\n        group.users.forEach(user => {\n          user.selected = user.checked;\n        });\n      });\n\n      this.setState({\n        groupsList: _groupsList,\n        isSelectedConsumers: true,\n        consumersCollapse: false\n      });\n    }\n  }\n\n  componentDidMount() {\n    let groupsList = [];\n    this.props.currentUser.groups.forEach(group => {\n      let usersList = [];\n      group.users.forEach(user => {\n        usersList.push(_objectSpread({}, user, {\n          checked: false,\n          selected: false\n        }));\n      });\n      groupsList.push(_objectSpread({}, group, {\n        users: usersList,\n        checked: false\n      }));\n    });\n    this.setState({\n      groupsList: groupsList\n    });\n  }\n\n  handleBackOrNextStep() {\n    let fadeAnimation = \"fadeOut\";\n\n    if (this.state.isStepOne) {\n      this.animateCSS(\".selectGroupCardHeader\", fadeAnimation);\n      this.animateCSS(\".selectGroupCardBody\", fadeAnimation, this.myCallBack);\n      this.updateUsersOfSelectedGroupsList();\n    } else {\n      this.animateCSS(\".selectUsersCardHeader\", fadeAnimation);\n      this.animateCSS(\".selectUsersCardBody\", fadeAnimation, this.myCallBack);\n    }\n  }\n\n  myCallBack() {\n    let fadeInAnimation = \"fadeIn\";\n\n    if (this.state.isStepOne) {\n      this.setState({\n        isStepOne: false\n      });\n      this.animateCSS(\".selectUsersCardHeader\", fadeInAnimation);\n      this.animateCSS(\".selectUsersCardBody\", fadeInAnimation);\n    } else {\n      this.setState({\n        isStepOne: true\n      });\n      this.animateCSS(\".selectGroupCardHeader\", fadeInAnimation);\n      this.animateCSS(\".selectGroupCardBody\", fadeInAnimation);\n    }\n  }\n\n  animateCSS(element, animationName, callback) {\n    const node = document.querySelector(element);\n    node.classList.add(\"animated\", animationName);\n\n    function handleAnimationEnd() {\n      node.classList.remove(\"animated\", animationName);\n      node.removeEventListener(\"animationend\", handleAnimationEnd);\n      if (typeof callback === \"function\") callback();\n    }\n\n    node.addEventListener(\"animationend\", handleAnimationEnd);\n  }\n\n  updateSelectedGroupsList(id) {\n    let _groupsList = this.state.groupsList;\n\n    _groupsList.forEach(group => {\n      if (group.id === id) {\n        group.checked = !group.checked;\n      }\n    });\n\n    let _isAnyGroupSelected = false;\n\n    _groupsList.forEach(group => {\n      if (group.checked) {\n        _isAnyGroupSelected = true;\n      }\n    });\n\n    this.setState({\n      groupsList: _groupsList,\n      isAnyGroupSelected: _isAnyGroupSelected\n    });\n  }\n\n  updateSelectedUsersList(id) {\n    let _groupsList = this.state.groupsList;\n    let _isAnyUserSelected = false;\n\n    _groupsList.forEach(group => {\n      if (group.checked) {\n        group.users.forEach(user => {\n          if (user.id === id) {\n            user.checked = !user.checked;\n          }\n\n          if (user.checked) _isAnyUserSelected = true;\n        });\n      }\n    });\n\n    this.setState({\n      groupsList: _groupsList,\n      isAnyUserSelected: _isAnyUserSelected\n    });\n  }\n\n  updateUsersOfSelectedGroupsList() {\n    let _users = [];\n    this.state.groupsList.forEach(group => {\n      if (group.checked) {\n        group.users.forEach(u => {\n          _users.push(u);\n        });\n      }\n    });\n    this.setState({\n      usersOfSelectedGroupsList: _users\n    });\n  }\n\n  render() {\n    let _groups = this.state.groupsList;\n    let groups = [];\n    let users = [];\n\n    _groups.forEach(group => {\n      groups.push(React.createElement(GroupUnit, {\n        group: group,\n        imageUri: require(\"../../../assets/img/theme/team-4-800x800.jpg\"),\n        updateSelectedGroupsList: this.updateSelectedGroupsList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }));\n\n      if (group.checked) {\n        group.users.forEach(user => {\n          users.push(React.createElement(UserUnit, {\n            user: user,\n            imageUri: require(\"../../../assets/img/theme/team-4-800x800.jpg\"),\n            updateSelectedUsersList: this.updateSelectedUsersList,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 204\n            },\n            __self: this\n          }));\n        });\n      }\n    });\n\n    let consumers = [];\n\n    if (this.state.isSelectedConsumers) {\n      this.state.groupsList.forEach(group => {\n        group.users.forEach(user => {\n          if (user.selected) {\n            consumers.push(React.createElement(Chip, {\n              class: \"mb-2 ml-2\",\n              haveCloseButton: \"true\",\n              avatarSrc: require(\"../../../assets/img/users/user01.jpg\"),\n              label: user.name // onDelete={() => this.deleteUser()}\n              ,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 219\n              },\n              __self: this\n            }));\n          }\n        });\n      });\n    }\n\n    return React.createElement(Col, {\n      lg: \"12\",\n      className: \"m-0 mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"m-0 d-flex justify-content-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"p-0 mx-3 mb-2 consumers-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, this.props.title), consumers, React.createElement(Button, {\n      className: \"btn btn-icon payments-btn-lv2 mt-0\",\n      type: \"button\",\n      color: \"dark-green\",\n      onClick: () => this.toggleModal(\"consumersCollapse\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"btn-inner--icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-user-plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }))), React.createElement(Modal, {\n      className: \"modal-dialog-centered\",\n      isOpen: this.state.consumersCollapse,\n      toggle: () => this.toggleModal(\"consumersCollapse\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-body p-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(Card, {\n      className: \"bg-secondary shadow border-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(CardHeader, {\n      className: \"bg-transparent p-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"text-muted  mt-3 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"selectGroupCardHeader my-modal-header \".concat(this.state.isStepOne ? \"\" : \"d-none\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, \"\\u0627\\u0646\\u062A\\u062E\\u0627\\u0628 \\u06AF\\u0631\\u0648\\u0647\"), React.createElement(\"h5\", {\n      className: \"selectUsersCardHeader my-modal-header \".concat(this.state.isStepOne ? \"d-none\" : \"\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \"\\u0627\\u0646\\u062A\\u062E\\u0627\\u0628 \\u06A9\\u0627\\u0631\\u0628\\u0631\\u0627\\u0646\"))), React.createElement(CardBody, {\n      className: \"selectGroupCardBody px-lg-3 py-lg-3 \".concat(this.state.isStepOne ? \"\" : \"d-none\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"groups m-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, groups), React.createElement(Row, {\n      className: \"text-center my-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"profile-modal-btn\" // className={'continueBtn profile-modal-btn'}\n      ,\n      color: \"primary\",\n      disabled: !this.state.isAnyGroupSelected,\n      onClick: this.handleBackOrNextStep,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, \"\\u0645\\u0631\\u062D\\u0644\\u0647 \\u0628\\u0639\\u062F\"), React.createElement(Button, {\n      className: \"profile-modal-btn\",\n      color: \"default\",\n      to: \"/dashboard\",\n      tag: Link,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, \"\\u0628\\u06CC\\u062E\\u06CC\\u0627\\u0644\")))), React.createElement(CardBody, {\n      className: \"selectUsersCardBody px-lg-3 py-lg-3 \".concat(this.state.isStepOne ? \"d-none\" : \"\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"groups m-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, users), React.createElement(Row, {\n      className: \"text-center my-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"profile-modal-btn\",\n      color: \"primary\",\n      disabled: !this.state.isAnyUserSelected,\n      onClick: this.handleSelectConsumers,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, \"\\u0627\\u0646\\u062A\\u062E\\u0627\\u0628\"), React.createElement(Button, {\n      className: \"profile-modal-btn\",\n      color: \"default\",\n      onClick: this.handleBackOrNextStep,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, \"\\u0628\\u0627\\u0632\\u06AF\\u0634\\u062A\"), React.createElement(Button, {\n      className: \"profile-modal-btn\",\n      color: \"default\",\n      to: \"/dashboard\",\n      tag: Link,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, \"\\u0628\\u06CC\\u062E\\u06CC\\u0627\\u0644\")))))))));\n  }\n\n}\n\nexport default ChooseUsers;","map":{"version":3,"sources":["/home/mohammad/Desktop/hesabeh/src/components/common/choose-users/choose-users.js"],"names":["React","Link","Container","Row","Col","InputGroupAddon","InputGroupText","Button","FormGroup","Form","Input","InputGroup","Card","CardHeader","CardBody","Collapse","Modal","Chip","GroupUnit","UserUnit","AOS","ChooseUsers","Component","constructor","props","toggleModal","state","setState","isStepOne","consumersCollapse","saveInputsValue","groupsList","usersOfGroupsList","usersOfSelectedGroupsList","isAnyGroupSelected","isAnyUserSelected","isSelectedConsumers","animateCSS","bind","handleBackOrNextStep","myCallBack","updateSelectedGroupsList","updateSelectedUsersList","updateUsersOfSelectedGroupsList","handleSelectConsumers","init","_groupsList","forEach","group","users","user","selected","checked","componentDidMount","currentUser","groups","usersList","push","fadeAnimation","fadeInAnimation","element","animationName","callback","node","document","querySelector","classList","add","handleAnimationEnd","remove","removeEventListener","addEventListener","id","_isAnyGroupSelected","_isAnyUserSelected","_users","u","render","_groups","require","consumers","name","title"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Container,\n  Row,\n  Col,\n  InputGroupAddon,\n  InputGroupText,\n  Button,\n  FormGroup,\n  Form,\n  Input,\n  InputGroup,\n  Card,\n  CardHeader,\n  CardBody,\n  Collapse,\n  Modal\n} from \"reactstrap\";\nimport Chip from \"../../common/chip/chip\";\nimport GroupUnit from \"./group-unit\";\nimport UserUnit from \"./user-unit\";\nimport AOS from 'aos'\n\nclass ChooseUsers extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      consumersCollapse: false,\n      saveInputsValue: false,\n      isStepOne: true,\n      groupsList: [],\n      usersOfGroupsList: [],\n      usersOfSelectedGroupsList: [],\n      isAnyGroupSelected: false,\n      isAnyUserSelected: false,\n      isSelectedConsumers: false\n    };\n\n    this.animateCSS = this.animateCSS.bind(this);\n    this.handleBackOrNextStep = this.handleBackOrNextStep.bind(this);\n    this.myCallBack = this.myCallBack.bind(this);\n    this.updateSelectedGroupsList = this.updateSelectedGroupsList.bind(this);\n    this.updateSelectedUsersList = this.updateSelectedUsersList.bind(this);\n    this.updateUsersOfSelectedGroupsList = this.updateUsersOfSelectedGroupsList.bind(\n      this\n    );\n    this.handleSelectConsumers = this.handleSelectConsumers.bind(this);\n    AOS.init();\n\n  }\n  handleSelectConsumers() {\n    if (this.state.isAnyGroupSelected && this.state.isAnyUserSelected) {\n      let _groupsList = this.state.groupsList;\n      _groupsList.forEach(group => {\n        group.users.forEach(user => {\n          user.selected = user.checked;\n        });\n      });\n      this.setState({\n        groupsList:_groupsList,\n        isSelectedConsumers: true,\n        consumersCollapse: false\n      });\n    }\n  }\n  componentDidMount() {\n    let groupsList = [];\n    this.props.currentUser.groups.forEach(group => {\n      let usersList = [];\n      group.users.forEach(user => {\n        usersList.push({\n          ...user,\n          checked: false,\n          selected: false\n        });\n      });\n      groupsList.push({\n        ...group,\n        users: usersList,\n        checked: false\n      });\n    });\n    this.setState({\n      groupsList: groupsList\n    });\n  }\n  handleBackOrNextStep() {\n    let fadeAnimation = \"fadeOut\";\n    if (this.state.isStepOne) {\n      this.animateCSS(\".selectGroupCardHeader\", fadeAnimation);\n      this.animateCSS(\".selectGroupCardBody\", fadeAnimation, this.myCallBack);\n      this.updateUsersOfSelectedGroupsList();\n    } else {\n      this.animateCSS(\".selectUsersCardHeader\", fadeAnimation);\n      this.animateCSS(\".selectUsersCardBody\", fadeAnimation, this.myCallBack);\n    }\n  }\n\n  myCallBack() {\n    let fadeInAnimation = \"fadeIn\";\n    if (this.state.isStepOne) {\n      this.setState({\n        isStepOne: false\n      });\n      this.animateCSS(\".selectUsersCardHeader\", fadeInAnimation);\n      this.animateCSS(\".selectUsersCardBody\", fadeInAnimation);\n    } else {\n      this.setState({\n        isStepOne: true\n      });\n      this.animateCSS(\".selectGroupCardHeader\", fadeInAnimation);\n      this.animateCSS(\".selectGroupCardBody\", fadeInAnimation);\n    }\n  }\n  animateCSS(element, animationName, callback) {\n    const node = document.querySelector(element);\n\n    node.classList.add(\"animated\", animationName);\n\n    function handleAnimationEnd() {\n      node.classList.remove(\"animated\", animationName);\n      node.removeEventListener(\"animationend\", handleAnimationEnd);\n\n      if (typeof callback === \"function\") callback();\n    }\n\n    node.addEventListener(\"animationend\", handleAnimationEnd);\n  }\n  toggleModal = state => {\n    this.setState({\n      [state]: !this.state[state],\n      isStepOne: true\n    });\n  };\n  updateSelectedGroupsList(id) {\n    let _groupsList = this.state.groupsList;\n    _groupsList.forEach(group => {\n      if (group.id === id) {\n        group.checked = !group.checked;\n      }\n    });\n\n    let _isAnyGroupSelected = false;\n    _groupsList.forEach(group => {\n      if (group.checked) {\n        _isAnyGroupSelected = true;\n      }\n    });\n    this.setState({\n      groupsList: _groupsList,\n      isAnyGroupSelected: _isAnyGroupSelected\n    });\n  }\n  updateSelectedUsersList(id) {\n    let _groupsList = this.state.groupsList;\n    let _isAnyUserSelected = false;\n\n    _groupsList.forEach(group => {\n      if (group.checked) {\n        group.users.forEach(user => {\n          if (user.id === id) {\n            user.checked = !user.checked;\n          }\n          if (user.checked) _isAnyUserSelected = true;\n        });\n      }\n    });\n    this.setState({\n      groupsList: _groupsList,\n      isAnyUserSelected: _isAnyUserSelected\n    });\n  }\n  updateUsersOfSelectedGroupsList() {\n    let _users = [];\n    this.state.groupsList.forEach(group => {\n      if (group.checked) {\n        group.users.forEach(u => {\n          _users.push(u);\n        });\n      }\n    });\n    this.setState({\n      usersOfSelectedGroupsList: _users\n    });\n  }\n\n  render() {\n    let _groups = this.state.groupsList;\n    let groups = [];\n    let users = [];\n    _groups.forEach(group => {\n      groups.push(\n        <GroupUnit\n          group={group}\n          imageUri={require(\"../../../assets/img/theme/team-4-800x800.jpg\")}\n          updateSelectedGroupsList={this.updateSelectedGroupsList}\n        />\n      );\n      if (group.checked) {\n        group.users.forEach(user => {\n          users.push(\n            <UserUnit\n              user={user}\n              imageUri={require(\"../../../assets/img/theme/team-4-800x800.jpg\")}\n              updateSelectedUsersList={this.updateSelectedUsersList}\n            />\n          );\n        });\n      }\n    });\n    let consumers = [];\n    if (this.state.isSelectedConsumers) {\n      this.state.groupsList.forEach(group => {\n        group.users.forEach(user => {\n          if (user.selected) {\n            consumers.push(\n              <Chip\n                class=\"mb-2 ml-2\"\n                haveCloseButton=\"true\"\n                avatarSrc={require(\"../../../assets/img/users/user01.jpg\")}\n                label={user.name}\n                // onDelete={() => this.deleteUser()}\n              />\n            );\n          }\n        });\n      });\n    }\n\n    return(\n      <Col lg=\"12\" className=\"m-0 mt-3\">\n        <Row className=\"m-0 d-flex justify-content-right\">\n          <p className=\"p-0 mx-3 mb-2 consumers-text\">\n            {this.props.title}\n          </p>\n          {consumers}\n          <Button\n            className=\"btn btn-icon payments-btn-lv2 mt-0\"\n            type=\"button\"\n            color=\"dark-green\"\n            onClick={() =>\n              this.toggleModal(\"consumersCollapse\")\n            }\n          >\n            <span className=\"btn-inner--icon\">\n              <i className=\"fa fa-user-plus\" />\n            </span>\n            {/*<span className=\"btn-inner--text\">مصرف کنندگان</span>*/}\n          </Button>\n\n          <Modal\n            className=\"modal-dialog-centered\"\n            isOpen={this.state.consumersCollapse}\n            toggle={() => this.toggleModal(\"consumersCollapse\")}\n          >\n            <div className=\"modal-body p-0\">\n              <Card className=\"bg-secondary shadow border-0\">\n                <CardHeader className=\"bg-transparent p-1\">\n                  {/* <Row className=\"justify-content-center\"> */}\n                  <div className=\"text-muted  mt-3 mb-2\">\n                    <h5\n                      className={`selectGroupCardHeader my-modal-header ${\n                        this.state.isStepOne ? \"\" : \"d-none\"\n                      }`}\n                    >\n                      انتخاب گروه\n                    </h5>\n                    <h5\n                      className={`selectUsersCardHeader my-modal-header ${\n                        this.state.isStepOne ? \"d-none\" : \"\"\n                      }`}\n                    >\n                      انتخاب کاربران\n                    </h5>\n                  </div>\n                  {/* </Row> */}\n                </CardHeader>\n                <CardBody\n                  className={`selectGroupCardBody px-lg-3 py-lg-3 ${\n                    this.state.isStepOne ? \"\" : \"d-none\"\n                  }`}\n                >\n                  <Row className={\"groups m-0\"}>{groups}</Row>\n                  <Row className=\"text-center my-4\">\n                    <Col>\n                      <Button\n                        className=\"profile-modal-btn\"\n                        // className={'continueBtn profile-modal-btn'}\n                        color=\"primary\"\n                        disabled={\n                          !this.state.isAnyGroupSelected\n                        }\n                        onClick={this.handleBackOrNextStep}\n                      >\n                        مرحله بعد\n                      </Button>\n                      <Button\n                        className=\"profile-modal-btn\"\n                        color=\"default\"\n                        to=\"/dashboard\"\n                        tag={Link}\n                      >\n                        بیخیال\n                      </Button>\n                    </Col>\n                  </Row>\n                </CardBody>\n                <CardBody\n                  className={`selectUsersCardBody px-lg-3 py-lg-3 ${\n                    this.state.isStepOne ? \"d-none\" : \"\"\n                  }`}\n                >\n                  <Row className={\"groups m-0\"}>{users}</Row>\n                  <Row className=\"text-center my-4\">\n                    <Col>\n                      <Button\n                        className=\"profile-modal-btn\"\n                        color=\"primary\"\n                        disabled={!this.state.isAnyUserSelected}\n                        onClick={this.handleSelectConsumers}\n                      >\n                        انتخاب\n                      </Button>\n                      <Button\n                        className=\"profile-modal-btn\"\n                        color=\"default\"\n                        onClick={this.handleBackOrNextStep}\n                      >\n                        بازگشت\n                      </Button>\n                      <Button\n                        className=\"profile-modal-btn\"\n                        color=\"default\"\n                        to=\"/dashboard\"\n                        tag={Link}\n                      >\n                        بیخیال\n                      </Button>\n                    </Col>\n                  </Row>\n                </CardBody>\n              </Card>\n            </div>\n          </Modal>\n        </Row>\n      </Col>\n    );\n  }\n}\n\nexport default ChooseUsers;\n"]},"metadata":{},"sourceType":"module"}